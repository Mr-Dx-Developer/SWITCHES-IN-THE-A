import{e as D,f as w,g as z,i as $,h as P,j as E,k,r as _,l as c,N as m,m as F,p as V,W as K,q as U,s as b,v as C,x as T,y as O,z as q,A as W,B as A,C as H,D as L,E as M,F as G,G as N,H as g,o as y,b as x,w as d,I as j,u as v,J as h,t as J,K as Q}from"./index-1c6b3dd3.js";import{u as B}from"./use-locale-119c58a2.js";const R=D("n-popconfirm"),I={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},S=U(I),X=w({name:"NPopconfirmPanel",props:I,setup(e){const{localeRef:i}=B("Popconfirm"),{inlineThemeDisabled:a}=z(),{mergedClsPrefixRef:n,mergedThemeRef:r,props:s}=$(R),u=P(()=>{const{common:{cubicBezierEaseInOut:t},self:{fontSize:l,iconSize:f,iconColor:p}}=r.value;return{"--n-bezier":t,"--n-font-size":l,"--n-icon-size":f,"--n-icon-color":p}}),o=a?E("popconfirm-panel",void 0,u,s):void 0;return Object.assign(Object.assign({},B("Popconfirm")),{mergedClsPrefix:n,cssVars:a?void 0:u,localizedPositiveText:P(()=>e.positiveText||i.value.positiveText),localizedNegativeText:P(()=>e.negativeText||i.value.negativeText),positiveButtonProps:k(s,"positiveButtonProps"),negativeButtonProps:k(s,"negativeButtonProps"),handlePositiveClick(t){e.onPositiveClick(t)},handleNegativeClick(t){e.onNegativeClick(t)},themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender})},render(){var e;const{mergedClsPrefix:i,showIcon:a,$slots:n}=this,r=_(n.action,()=>this.negativeText===null&&this.positiveText===null?[]:[this.negativeText!==null&&c(m,Object.assign({size:"small",onClick:this.handleNegativeClick},this.negativeButtonProps),{default:()=>this.localizedNegativeText}),this.positiveText!==null&&c(m,Object.assign({size:"small",type:"primary",onClick:this.handlePositiveClick},this.positiveButtonProps),{default:()=>this.localizedPositiveText})]);return(e=this.onRender)===null||e===void 0||e.call(this),c("div",{class:[`${i}-popconfirm__panel`,this.themeClass],style:this.cssVars},F(n.default,s=>a||s?c("div",{class:`${i}-popconfirm__body`},a?c("div",{class:`${i}-popconfirm__icon`},_(n.icon,()=>[c(V,{clsPrefix:i},{default:()=>c(K,null)})])):null,s):null),r?c("div",{class:[`${i}-popconfirm__action`]},r):null)}}),Y=b("popconfirm",[C("body",`
 font-size: var(--n-font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[C("icon",`
 display: flex;
 font-size: var(--n-icon-size);
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 margin: 0 8px 0 0;
 `)]),C("action",`
 display: flex;
 justify-content: flex-end;
 `,[T("&:not(:first-child)","margin-top: 8px"),b("button",[T("&:not(:last-child)","margin-right: 8px;")])])]),Z=Object.assign(Object.assign(Object.assign({},O.props),G),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},positiveButtonProps:Object,negativeButtonProps:Object,onPositiveClick:Function,onNegativeClick:Function}),ee=w({name:"Popconfirm",props:Z,__popover__:!0,setup(e){const{mergedClsPrefixRef:i}=z(),a=O("Popconfirm","-popconfirm",Y,q,e,i),n=W(null);function r(o){const{onPositiveClick:t,"onUpdate:show":l}=e;Promise.resolve(t?t(o):!0).then(f=>{var p;f!==!1&&((p=n.value)===null||p===void 0||p.setShow(!1),l&&N(l,!1))})}function s(o){const{onNegativeClick:t,"onUpdate:show":l}=e;Promise.resolve(t?t(o):!0).then(f=>{var p;f!==!1&&((p=n.value)===null||p===void 0||p.setShow(!1),l&&N(l,!1))})}return A(R,{mergedThemeRef:a,mergedClsPrefixRef:i,props:e}),Object.assign(Object.assign({},{setShow(o){var t;(t=n.value)===null||t===void 0||t.setShow(o)},syncPosition(){var o;(o=n.value)===null||o===void 0||o.syncPosition()}}),{mergedTheme:a,popoverInstRef:n,handlePositiveClick:r,handleNegativeClick:s})},render(){const{$slots:e,$props:i,mergedTheme:a}=this;return c(M,L(i,S,{theme:a.peers.Popover,themeOverrides:a.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:e.activator||e.trigger,default:()=>{const n=H(i,S);return c(X,Object.assign(Object.assign({},n),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),e)}})}}),ie={__name:"Action",props:{fields:Object,pop_confirm:Boolean,confirm_message:String},setup(e){const i=e,a=async()=>{g.send("inputDialog:cancel",{timestamp:Date.now()})};g.keyPress("Escape",function(){g.send("inputDialog:cancel",{timestamp:Date.now(),escape:!0})});const n=async()=>{let r=[];i.fields.forEach((s,u)=>{switch(s.type){case"slider":let o=s.options;r[u]={};for(let t=0;t<o.length;t++){const l=o[t];r[u][t]=l.value||l.default}break;default:r[u]=s.value||s.default;break}}),g.send("inputDialog:submit",{values:r})};return(r,s)=>(y(),x(v(Q),{justify:"right",style:{"margin-top":".5rem"}},{default:d(()=>[j(v(m),{type:"error",onClick:a},{default:d(()=>[h(" Cancel ")]),_:1}),e.pop_confirm?(y(),x(v(ee),{key:0,onPositiveClick:n},{trigger:d(()=>[j(v(m),{secondary:"",type:"primary"},{default:d(()=>[h("Confirm")]),_:1})]),default:d(()=>[h(" "+J(e.confirm_message),1)]),_:1})):(y(),x(v(m),{key:1,type:"primary",onClick:n},{default:d(()=>[h(" Confirm ")]),_:1}))]),_:1}))}};export{ie as default};
