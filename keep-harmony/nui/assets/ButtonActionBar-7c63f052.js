import{f as A,A as _,h as E,o as c,c as b,L as v,M as S,b as k,w as r,I as P,u as d,N as h,a as p,n as C,t as V,E as L,d as M,H as R,b8 as q,b9 as D,_ as F}from"./index-1c6b3dd3.js";const H=async a=>{if(!a||a==="")return!1;try{const s=document.createElement("textarea");return s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}catch(s){return console.error("Unable to copy text to clipboard:",s),!1}},i={set:H},U=a=>(q("data-v-9981e865"),a=a(),D(),a),j={class:"action-bar"},G=U(()=>p("li",{class:"fa-solid fa-rotate"},null,-1)),J=A({__name:"ButtonActionBar",props:{row:{}},emits:["update"],setup(a,{emit:s}){const m=a,B=async(o,t,e)=>{if(o.stopPropagation(),!e.copy)return!1;let g=t.icon,l=t.status,z=e.copy,n=!1;switch(t.loading=!0,z){case"description":n=i.set(e.description);break;case"title":n=i.set(e.title);break;case"footer":n=await i.set(e.footer);break;case"image":n=await i.set(e.image);break;case!0:n=await i.set(e.description);break;default:n=i.set(e.copy);break}setTimeout(()=>{t.loading=!1,n==!1?(t.icon="fa-solid fa-xmark",t.status="error"):(t.icon="fa-solid fa-check",t.status="success")},250),setTimeout(()=>{t.status=l,t.icon=g},1e3)},u=_(!1),f=_("info"),x=_([{id:"copy",description:"Copy %type%",trigger:"copy",icon:"fa-solid fa-copy",status:"",action:B,loading:!1}]),y=(o,t)=>{u.value=!1,f.value=t,setTimeout(()=>{f.value="info",o.disabled=!1},1500)},N=function(o,t){u.value=!0,t.disabled=!0,o.stopPropagation(),R.send("contextMenu:updateRequest",{action:"update",type:"element",id:t.id,has_action:t.action},function(e){if(!e||typeof e=="boolean"){y(t,"error");return}e.id=t.id,e.index=t.index,s("update",e),y(t,"success")},function(e){y(t,"error")})},I=E(()=>x.value.filter(o=>m.row[o.id])),T=(o,t)=>typeof t.description=="string"&&typeof o.copy=="string"?t.description.replace("%type%",o.copy):"Copy";return(o,t)=>(c(),b("div",j,[(c(!0),b(v,null,S(I.value,(e,g)=>(c(),b(v,{key:g},[e.description?(c(),k(d(L),{key:0,trigger:"hover"},{trigger:r(()=>[P(d(h),{ghost:"",size:"small",type:e.status,onClick:l=>e.action(l,e,o.row),loading:e.loading},{icon:r(()=>[p("li",{class:C(e.icon)},null,2)]),_:2},1032,["type","onClick","loading"])]),default:r(()=>[p("span",null,V(T(o.row,e)),1)]),_:2},1024)):(c(),k(d(h),{key:1,ghost:"",size:"small",type:e.status,onClick:l=>e.action(l,e,o.row),loading:e.loading},{icon:r(()=>[p("li",{class:C(e.icon)},null,2)]),_:2},1032,["type","onClick","loading"]))],64))),128)),o.row.update?(c(),k(d(h),{key:0,circle:"",ghost:"",size:"small",type:f.value,onClick:t[0]||(t[0]=e=>N(e,o.row)),loading:u.value},{icon:r(()=>[G]),_:1},8,["type","loading"])):M("",!0)]))}});const O=F(J,[["__scopeId","data-v-9981e865"]]);export{O as default};
