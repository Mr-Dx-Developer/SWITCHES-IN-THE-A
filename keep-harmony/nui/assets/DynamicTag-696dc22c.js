import{ae as L,af as K,ag as $,ah as W,ai as E,aj as G,s as A,f as H,g as M,a5 as q,A as h,y as j,k as J,a6 as Q,h as S,j as X,l as r,ak as w,N as Y,p as Z,K as N,al as ee,P as te,G as z,_ as ae,o as ne,b as se,w as le,I as ie,u as B}from"./index-1c6b3dd3.js";import{u as ue}from"./use-locale-119c58a2.js";import{N as re}from"./Input-d45cf124.js";import{A as oe}from"./Add-d368fffe.js";import"./Suffix-067b8130.js";function de(t){switch(t){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${t} has no smaller size.`)}const ce=L({name:"DynamicTags",common:K,peers:{Input:$,Button:W,Tag:E,Space:G},self(){return{inputWidth:"64px"}}}),me=ce,fe=A("dynamic-tags",[A("input",{minWidth:"var(--n-input-width)"})]),pe=Object.assign(Object.assign(Object.assign({},j.props),ee),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ge=H({name:"DynamicTags",props:pe,setup(t){const{mergedClsPrefixRef:o,inlineThemeDisabled:u}=M(t),{localeRef:a}=ue("DynamicTags"),i=q(t),{mergedDisabledRef:s}=i,m=h(""),f=h(!1),p=h(!0),y=h(null),v=j("DynamicTags","-dynamic-tags",fe,me,t,o),b=h(t.defaultValue),_=J(t,"value"),d=Q(_,b),x=S(()=>a.value.add),F=S(()=>de(t.size)),C=S(()=>s.value||!!t.max&&d.value.length>=t.max);function T(e){const{onChange:n,"onUpdate:value":g,onUpdateValue:k}=t,{nTriggerFormInput:P,nTriggerFormChange:U}=i;n&&z(n,e),k&&z(k,e),g&&z(g,e),b.value=e,P(),U()}function I(e){const n=d.value.slice(0);n.splice(e,1),T(n)}function O(e){switch(e.key){case"Enter":c()}}function c(e){const n=e??m.value;if(n){const g=d.value.slice(0);g.push(t.onCreate(n)),T(g)}f.value=!1,p.value=!0,m.value=""}function R(){c()}function D(){f.value=!0,te(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),p.value=!1})}const V=S(()=>{const{self:{inputWidth:e}}=v.value;return{"--n-input-width":e}}),l=u?X("dynamic-tags",void 0,V,t):void 0;return{mergedClsPrefix:o,inputInstRef:y,localizedAdd:x,inputSize:F,inputValue:m,showInput:f,inputForceFocused:p,mergedValue:d,mergedDisabled:s,triggerDisabled:C,handleInputKeyUp:O,handleAddClick:D,handleInputBlur:R,handleCloseClick:I,handleInputConfirm:c,mergedTheme:v,cssVars:u?void 0:V,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){const{mergedTheme:t,cssVars:o,mergedClsPrefix:u,onRender:a,renderTag:i}=this;return a==null||a(),r(N,{class:[`${u}-dynamic-tags`,this.themeClass],size:"small",style:o,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:m,type:f,round:p,size:y,color:v,closable:b,mergedDisabled:_,showInput:d,inputValue:x,inputStyle:F,inputSize:C,inputForceFocused:T,triggerDisabled:I,handleInputKeyUp:O,handleInputBlur:c,handleAddClick:R,handleCloseClick:D,handleInputConfirm:V,$slots:l}=this;return this.mergedValue.map((e,n)=>i?i(e,n):r(w,{key:n,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:m,type:f,round:p,size:y,color:v,closable:b,disabled:_,onClose:()=>{D(n)}},{default:()=>typeof e=="string"?e:e.label})).concat(d?l.input?l.input({submit:V,deactivate:c}):r(re,Object.assign({placeholder:"",size:C,style:F,autosize:!0},this.inputProps,{ref:"inputInstRef",value:x,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:O,onBlur:c,internalForceFocus:T})):l.trigger?l.trigger({activate:R,disabled:I}):r(Y,{dashed:!0,disabled:I,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:C,onClick:R},{icon:()=>r(Z,{clsPrefix:u},{default:()=>r(oe,null)})}))}})}});const he={__name:"DynamicTag",props:{field:Object},setup(t){function o(a){return{value:a,disabled:!1}}function u(a,i){return r(w,{checked:!0,type:a.type,disabled:a.disabled,closable:a.closable!==null?a.closable:!0},{default:()=>a.value})}return(a,i)=>(ne(),se(B(N),null,{default:le(()=>[ie(B(ge),{"render-tag":u,onCreate:o,value:t.field.value,"onUpdate:value":i[0]||(i[0]=s=>t.field.value=s),max:t.field.max},null,8,["value","max"])]),_:1}))}},Ie=ae(he,[["__scopeId","data-v-fe6907a4"]]);export{Ie as default};
