import{r as P,a as i,j as e,F as g}from"./jsx-runtime-f40812bf.js";import{L as s,b as S,e as H,g as q,J as B,C as O,h as U,K as z,M as X,N as J,c as $,f as I,k as K,n as Q,l as ee,p as se,i as ie,I as te}from"./Phone-3c5ec2e3.js";import{u as v,a as _,M as ae,N as ne,ar as le,as as Y,an as L,V as b,a8 as ce,k as Z,S as re,ab as x,at as oe,F as de,n as Se,H as Pe,a3 as Ne,au as me,av as he,X as Te,aw as ue,ax as pe}from"./index.esm-497ba86e.js";import{r as w}from"./number-28525126.js";import{S as V}from"./Slider-ca88ed4a.js";import{N as W}from"./Numpad-cc7ba39c.js";function ve(a){const c=v(S.Settings),r=v(U),[t,N]=P.useState(!1),o=["#39334d","#465281","#87855e","#4b6a45","#702e2e","picker"];return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>t?N(!1):a.setPage([]),children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS")}),e("div",{})]}),e("div",{style:{marginTop:"2rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((l,h)=>i("div",{className:"mode",onClick:()=>{S.Settings.patch({display:{...c.display,theme:l}})},children:[e("img",{src:`./assets/img/${l}-mode-placeholder.png`,alt:"Theme"}),e("div",{className:"mode-text",children:H(l)}),e(q,{checked:c.display.theme===l})]},h))})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(B,{checked:c.display.automatic,onChange:()=>{S.Settings.patch({display:{...c.display,automatic:!c.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(ae,{}),e(V,{onChange:l=>{S.Settings.patch({display:{...c.display,brightness:l}})},value:c.display.brightness,id:"brightness",min:.1,max:1,step:.01}),e(ne,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PHONE_SCALE")}),e("section",{children:i("div",{className:"settings-item",children:[e(le,{}),e(V,{onChange:l=>{S.Settings.patch({display:{...c.display,size:l}})},value:c.display.size,id:"phone-scale-slider",min:.5,max:1.1,step:.1}),e(Y,{})]})}),r.allowFrameColorChange&&i(g,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.FRAME_COLOR")}),e("section",{children:e("div",{className:"settings-item",children:e("div",{className:"colors",children:o.map((l,h)=>{let m=l==="picker";return e("div",{className:"color",style:{backgroundImage:m&&"url(./assets/img/icons/picker.png)",boxShadow:!m&&`inset  0 0.1em 5em ${l}, 0 0 0 0.2em hsl(254, 30%, 85%)`},"data-active":c.display.frameColor===l,onClick:()=>{if(m){O.ColorPicker.set({onSelect:T=>{S.Settings.patch({display:{...c.display,frameColor:T}})}});return}S.Settings.patch({display:{...c.display,frameColor:l}})}},h)})})})})]})]})}function Ee(a){var h,m,T,p;const c=v(U),r=v(S.Settings),[t,N]=P.useState(!1),[o,l]=P.useState(null);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{t?N(!1):a.setPage([])},children:[e(_,{}),t?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:t?s(`APP_NAMES.${o}`,c.apps[o].name):s("APPS.SETTINGS.NOTIFICATIONS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),t?e(g,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(B,{onChange:()=>{var d,u,f;S.Settings.patch({notifications:{...r.notifications,[o]:{...(d=r.notifications)==null?void 0:d[o],enabled:!((f=(u=r.notifications)==null?void 0:u[o])!=null&&f.enabled)}}})},checked:((m=(h=r.notifications)==null?void 0:h[o])==null?void 0:m.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(B,{onChange:()=>{var d,u,f;S.Settings.patch({notifications:{...r.notifications,[o]:{...(d=r.notifications)==null?void 0:d[o],sound:!((f=(u=r.notifications)==null?void 0:u[o])!=null&&f.sound)}}})},checked:((p=(T=r.notifications)==null?void 0:T[o])==null?void 0:p.sound)??!0})})]})]})}):i(g,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{marginBottom:"4rem"},children:Object.keys(c.apps).filter(d=>{var u;return z(d)||((u=c.apps[d])==null?void 0:u.removable)===!1}).sort((d,u)=>s(`APP_NAMES.${d}`,c.apps[d].name).localeCompare(s(`APP_NAMES.${u}`,c.apps[u].name))).map((d,u)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{l(d),N(!0)},children:[i("div",{className:"setting",children:[e("img",{src:c.apps[d].icon??`./assets/img/icons/apps/${d}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${d}`,c.apps[d].name)})]}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]},u))})]})]})}function ge(a){var h;const c=v(S.Settings),[r,t]=P.useState(!1),[N,o]=P.useState(null),l=v(U);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{r?t(!1):a.setPage([]),S.SoundManager.reset()},children:[e(_,{}),r?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:r?N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE"):s("APPS.SETTINGS.SOUND_HAPTICS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),r?i(g,{children:[e("div",{className:"category-title",children:N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE")}),e("section",{children:Object.keys((h=l.sounds)==null?void 0:h[N]).map((m,T)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{var p,d;S.Settings.patch({sound:{...S.Settings.value.sound,[N]:m}}),S.SoundManager.set({url:`./assets/sound/ringtones/${(d=(p=l.sounds)==null?void 0:p[N])==null?void 0:d[m]}`,timeout:N==="ringtones"?5e3:null,override:!0})},children:i("div",{className:"setting",children:[m==c.sound[N]?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:H(m)})]})},T))})]}):i(g,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(ce,{}),e(V,{onChange:m=>{S.Settings.patch({sound:{...S.Settings.value.sound,volume:m}})},value:c.sound.volume,min:0,max:1,step:.05}),e(Z,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.SOUND_HAPTICS_PATTERNS")}),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{o("ringtone"),t(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.RINGTONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:H(c.sound.ringtone)}),e(L,{className:"chevron"})]})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.TEXT_TONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:s("APPS.SETTINGS.DEFAULT")}),e(L,{className:"chevron"})]})]})]})]})]})}function Ae(a){const{settingsSections:c}=P.useContext(F),r=v(S.Settings),t=v(U),N=8.25*1e3*1e3;return P.useEffect(()=>{if(!t.apps)return;let o=Object.keys(t.apps).filter(h=>{var m;return((m=t.apps[h])==null?void 0:m.removable)===!1}).reduce((h,m)=>h+t.apps[m].size,0),l=r.storage.used-(o+N);U.patch({apps:{...t.apps,Photos:{...t.apps.Photos,size:t.apps.Photos.size+l}}})},[]),i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var o;a.setPage((o=c==null?void 0:c[2])==null?void 0:o[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.STORAGE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.USED")})}),e("div",{className:"setting-value",children:i("div",{className:"value",children:[w(r.storage.used/1e3/1e3,2)," GB ",s("APPS.SETTINGS.OF")," ",w(r.storage.total/1e3/1e3,0)," GB"]})})]})}),e("section",{children:Object.keys(t.apps).filter(o=>{var l;return z(o)||((l=t.apps[o])==null?void 0:l.removable)===!1}).sort((o,l)=>t.apps[l].size-t.apps[o].size).map((o,l)=>i("div",{className:"settings-item",style:{cursor:"pointer"},children:[i("div",{className:"setting",children:[e("img",{src:t.apps[o].icon??`./assets/img/icons/apps/${o}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${o}`,t.apps[o].name)})]}),e("div",{className:"setting-value",children:e("div",{className:"value",children:t.apps[o].size>1e6?w(t.apps[o].size/1e6,2)+" GB":t.apps[o].size>1e3?w(t.apps[o].size/1e3,2)+" MB":t.apps[o].size+" KB"})})]}))})]})}function Ie(a){const c=v(S.Settings),[r,t]=P.useState(!1),N=v(U);return i("div",{className:"animation-slide right",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{r?t(!1):a.setPage([])},children:[e(_,{}),r?s("APPS.SETTINGS.WALLPAPER"):s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[r?s("APPS.SETTINGS.WALLPAPERS"):s("APPS.SETTINGS.WALLPAPER")," "]}),e("div",{})]}),r?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var o,l,h;O.Gallery.set({allowExternal:(h=(l=(o=U)==null?void 0:o.value)==null?void 0:l.AllowExternal)==null?void 0:h.Other,onSelect:m=>{S.Settings.patch({wallpaper:{...c.wallpaper,background:m.src}})}})},children:e(Y,{})}),c.wallpaper.background.includes("http")&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${c.wallpaper.background})`}}),N.wallpapers.map((o,l)=>e(Ce,{wallpaper:o,selected:c.wallpaper.background,theme:c.display.theme,cb:()=>{S.Settings.patch({wallpaper:{...c.wallpaper,background:o}})}},l))]}):e(fe,{setExploringWallpapers:t})]})}const Ce=({wallpaper:a,theme:c,selected:r,cb:t})=>{const[N,o]=P.useState("");return P.useEffect(()=>{X(a,l=>o(l))},[]),e("div",{className:`wallpaper ${r===a?"active":""}`,style:{backgroundImage:`url(${N})`},onClick:()=>t()})},fe=a=>{var N,o,l;const[c,r]=P.useState(""),t=v(S.Settings);return P.useEffect(()=>{X(t.wallpaper.background,h=>r(h))},[]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>a.setExploringWallpapers(!0),children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:`url(${c})`},children:i("div",{className:"lockscreen-container",children:[e(re,{}),e("div",{className:"date",style:{color:((N=t==null?void 0:t.lockscreen)==null?void 0:N.color)??"#ffffff"},children:"Friday, September 16"}),e("div",{className:"time","data-style":((o=t==null?void 0:t.lockscreen)==null?void 0:o.fontStyle)??"1",style:{color:((l=t==null?void 0:t.lockscreen)==null?void 0:l.color)??"#ffffff"},children:"13:37"})]})}),e("div",{className:"preview",style:{backgroundImage:`url(${c})`},children:i("div",{className:"settings-homescreen-container",children:[e("div",{className:"settings-homescreen-apps",children:t.apps[1].filter(h=>!J(h)).slice(0,24).map(h=>{var p;let m=U.value.apps[h],T=((p=m==null?void 0:m[h])==null?void 0:p.icon)??`./assets/img/icons/apps/${h}.jpg`;return i("div",{className:"settings-homescreen-app",children:[e("img",{src:T,onError:d=>d.currentTarget.src="./assets/img/icons/apps/unkown.png"}),e("div",{className:"app-name",children:h})]})})}),e("div",{className:"favourite-apps",children:t.apps[0].map(h=>e("div",{className:"settings-homescreen-app",children:e("img",{src:`./assets/img/icons/apps/${h}.jpg`})}))})]})})]})})]})};function Ge(a){const c=P.useRef(null),r=v(S.Settings),[t,N]=P.useState([]),[o,l]=P.useState(!1),[h,m]=P.useState([]),[T,p]=P.useState(!1),d=A=>{if(A=="backspace")N(E=>E.slice(0,-1));else{const E=[...t,A];N([...t,A]),E.length>3&&(T?I("Security",{action:"setPin",pin:E.join("")}).then(R=>{S.Settings.patch({security:{...r.security,pinCode:!0}}),p(!1),N([])}):I("Security",{action:"verifyPin",pin:E.join("")}).then(R=>{R?(l(!0),m(E),N([])):(c.current.className=`pin-circles wrong ${r.display.theme=="dark"?"light":"dark"}`,setTimeout(()=>{c.current.className=`pin-circles ${r.display.theme=="dark"?"light":"dark"}`,N([])},350))}))}},u=A=>{A?I("Security",{action:"setFaceId",pin:h.join("")}).then(E=>{E&&S.Settings.patch({security:{...S.Settings.value.security,faceId:!0}})}):I("Security",{action:"removeFaceId",pin:h.join("")}).then(E=>{E&&S.Settings.patch({security:{...S.Settings.value.security,faceId:!1}})})},f=()=>{I("Security",{action:"removePin",pin:t.join("")}).then(A=>{A&&S.Settings.patch({security:{pinCode:!1,faceId:!1}})})};return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{a.setPage([])},children:[e("i",{className:"fal fa-chevron-left"}),o||!r.security.pinCode?s("APPS.SETTINGS.BACK"):s("CANCEL")]}),e("div",{className:"title",children:o||!r.security.pinCode?s("APPS.SETTINGS.FACE_ID_PASSWORD"):s("APPS.SETTINGS.ENTER_PASSCODE")}),e("div",{})]}),o||!r.security.pinCode?e(g,{children:T?i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e($,{pin:t,dark:r.display.theme,Ref:c})]}),e("div",{className:"numbers",children:e(W,{cb:A=>{d(A)}})})]}):i(g,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.FACE_ID")}),e("section",{children:r.security.faceId?e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CONFIRM"),color:"red",cb:()=>{u(!1)}}]})},children:e("div",{className:"setting",children:e("div",{className:"title red",children:s("APPS.SETTINGS.RESET_FACE_ID")})})}):e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{r.security.pinCode&&O.PopUp.set({title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CONFIRM"),cb:()=>{u(!0)}}]})},children:e("div",{className:"setting",children:e("div",{className:`title ${r.security.pinCode?"blue":"grey"}`,children:s("APPS.SETTINGS.ENABLE_FACE_ID")})})})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PIN_CODE")}),e("section",{children:r.security.pinCode?i(g,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CONFIRM"),color:"red",cb:()=>f()}]})},children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.TURN_PASSCODE_OFF")})})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>p(!0),children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]}):i(g,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{p(!0)},children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.TURN_PASSCODE_ON")})})}),e("div",{className:"settings-item",children:e("div",{className:"setting",children:e("div",{className:"title grey",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]})})]})}):i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e($,{pin:t,dark:r.display.theme,Ref:c})]}),e("div",{className:"numbers",children:e(W,{cb:A=>d(A)})})]})]})}function ke(a){var p;const c=v(S.Settings),r=v(S.PhoneNumber),[t,N]=P.useState(!1),[o,l]=P.useState(!1),[h,m]=P.useState([]);P.useEffect(()=>{I("Phone",{action:"getBlockedNumbers"}).then(d=>{d&&m(d)})},[]);const T=d=>{I("Phone",{action:"toggleBlock",number:d,blocked:!1}).then(u=>{u&&m(f=>f.filter(A=>A!==d))})};return i("div",{className:`animation-slide ${t?"left":"right"}`,children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>t?N(!1):a.setPage([]),children:[e(_,{}),t?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:t?s("APPS.SETTINGS.BLOCKED_CONTACTS"):s("APPS.SETTINGS.PHONE")}),t?e("div",{className:"value",onClick:()=>l(d=>!d),children:o?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")}):e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),t?e(g,{children:e("section",{children:h.map((d,u)=>i("div",{className:"settings-item",children:[i("div",{className:"setting",children:[o?e(x,{className:"remove",onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.UNBLOCK_POPUP.TITLE"),description:s("APPS.SETTINGS.UNBLOCK_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CANCEL")},{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CONFIRM"),color:"red",cb:()=>{T(d)}}]})}}):e(x,{className:"hidden"}),e("div",{className:"title",children:K(d)})]}),e("div",{className:"setting-value"})]},u))})}):i(g,{children:[e("section",{children:i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.MY_NUMBER")})}),i("div",{className:"setting-value",children:[K(r),e(oe,{onClick:()=>{Q(r)}})]})]})}),i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SHOW_CALLER_ID")})}),e("div",{className:"setting-value",children:e(B,{onChange:()=>{var d;S.Settings.patch({phone:{...c.phone,showCallerId:!((d=c.phone)!=null&&d.showCallerId)}})},checked:((p=c.phone)==null?void 0:p.showCallerId)??!1})})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>N(!0),children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLOCKED_CONTACTS")})}),e("div",{className:"setting-value",children:e(L,{className:"chevron"})})]})]})]})]})}function Oe({setPage:a}){const c=v(S.PhoneNumber),[r,t]=P.useState([]),[N,o]=P.useState(!1);return P.useEffect(()=>{I("Backup",{action:"get"}).then(l=>{l&&t(l)})},[]),i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>a([]),children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.CLOUD_BACKUP")}),e("div",{className:"value",onClick:()=>o(l=>!l),children:N?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")})]}),e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.YOUR_PROFILE")}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{r.find(l=>l.number===c)||O.PopUp.set({title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CONFIRM"),cb:()=>{I("Backup",{action:"create"}).then(l=>{l&&t([{number:c}])})}}]})},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CREATE_BACKUP")})}),e("div",{className:"setting-value"})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BACKUPS")}),e("section",{children:r.map((l,h)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{I("Backup",{action:"apply",number:l.number}).then(m=>{m&&setTimeout(()=>{O.PopUp.set({title:s("APPS.SETTINGS.SUCCESS"),description:s("APPS.SETTINGS.SUCCESS_TEXT"),buttons:[{title:s("APPS.SETTINGS.OK")}]})},500)})}}]})},children:[i("div",{className:"setting",children:[N&&e(x,{className:"remove",onClick:m=>{m.stopPropagation(),O.PopUp.set({title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{I("Backup",{action:"delete",number:l.number}).then(T=>{T&&t(p=>p.filter(d=>d.number!==l.number))})}}]})}}),e("div",{className:"title",children:K(l.number)})]}),e("div",{className:"setting-value"})]},h))})]})}function j({setPage:a,type:c}){const{settingsSections:r}=P.useContext(F);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var t;return a((t=r==null?void 0:r[2])==null?void 0:t[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s(`APPS.SETTINGS.${c.toUpperCase()}`)}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),i("section",{children:[c==="Language"&&e(_e,{}),c==="Temperature"&&e(ye,{})]})]})}const _e=()=>{const a=v(S.Settings),[c,r]=P.useState([]);return P.useEffect(()=>{I("getLocales").then(t=>{t&&r(t)})},[]),P.useEffect(()=>{ee(a.locale)},[a.locale]),i(g,{children:[c.map((t,N)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>S.Settings.patch({locale:t.locale}),children:i("div",{className:"setting",children:[t.locale===a.locale?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:t.name})]})},N)),";"]})},ye=()=>{const a=v(S.Settings);return i(g,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>S.Settings.patch({weather:{celcius:!0}}),children:i("div",{className:"setting",children:[a.weather&&a.weather.celcius?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.CELCIUS")})]})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>S.Settings.patch({weather:{celcius:!1}}),children:i("div",{className:"setting",children:[a.weather&&a.weather.celcius===!1?e(b,{className:"checkmark"}):e(b,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.FAHRENHEIT")})]})})]})};function D(a,c){if(!a.match(/\d+\.\d+\.\d+/)||!c.match(/\d+\.\d+\.\d+/))return!1;const r=a.split(".").map(Number),t=c.split(".").map(Number);return(r[0]??0)<(t[0]??0)||(r[1]??0)<(t[1]??0)||(r[2]??0)<(t[2]??0)}function Le(a){const{settingsSections:c}=P.useContext(F),r=v(S.Settings);return i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var t;return a.setPage((t=c==null?void 0:c[2])==null?void 0:t[0].options)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.SOFTWARE_UPDATE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),D(r.version,r.latestVersion)&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"https://docs.lbphone.com/img/favicon.png"}),i("div",{className:"info",children:[i("div",{className:"title",children:["V",r.latestVersion]}),e("div",{className:"author",children:e(be,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the phone to the latest version."})]})}),!D(r.version,r.latestVersion)&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",r==null?void 0:r.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const be=()=>{const a="abcdefghijklmnopqrstuvwxyz".split("");return i(g,{children:[a[11].toUpperCase(),a[1].toUpperCase()]})};const F=P.createContext(null);function Me(){var R;const a=v(S.Settings),[c,r]=P.useState(""),[t,N]=P.useState([]),[o,l]=P.useState([]),[h,m]=P.useState(null),[T,p]=P.useState(null),[d,u]=P.useState([]);P.useEffect(()=>{u(C=>{let G=0;return[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),icon:e(de,{className:"orange"}),switch:!0,value:a.airplaneMode,onChange:()=>{S.Settings.patch({airplaneMode:!a.airplaneMode})}},{name:s("APPS.SETTINGS.STREAMER_MODE"),icon:e(Se,{className:"purple"}),switch:!0,value:a.streamerMode,onChange:()=>{S.Settings.patch({streamerMode:!a.streamerMode})}},{name:s("APPS.SETTINGS.BLUETOOTH"),icon:e(Pe,{className:"blue"}),value:s("APPS.SETTINGS.ON")}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),icon:e(Ne,{className:"red"}),options:e(Ee,{setPage:l})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),icon:e(Z,{className:"pink"}),options:e(ge,{setPage:l})}],[{name:s("APPS.SETTINGS.GENERAL"),icon:e(me,{className:"grey"}),notification:D(a.version,a.latestVersion),options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.NAME"),value:a.name,input:{type:"name",maxLength:20},cb:(n,y)=>{I("setPhoneName",n)}},{name:s("APPS.SETTINGS.VERSION"),value:a.version},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Phone"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://lbphone.com",isLink:!0}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:"0"},{name:s("APPS.SETTINGS.PHOTOS"),value:G??0},{name:s("APPS.SETTINGS.APPLICATIONS"),value:f()},{name:s("APPS.SETTINGS.CAPACITY"),value:`${a.storage.total/1e3/1e3} GB`},{name:s("APPS.SETTINGS.AVAILABLE"),value:`${w((a.storage.total-a.storage.used)/1e3/1e3,1)} GB`}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(Le,{setPage:l}),notification:D(a.version,a.latestVersion)},{name:s("APPS.SETTINGS.PHONE_STORAGE"),options:e(Ae,{setPage:l})}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!a.time.twelveHourClock,id:"twelveHourClock",onChange:()=>{S.Settings.patch({time:{...a.time,twelveHourClock:!a.time.twelveHourClock}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(j,{type:"Language",setPage:l})}],[{name:s("APPS.SETTINGS.TEMPERATURE"),value:a.weather&&a.weather.celcius?"C":"F",options:e(j,{type:"Temperature",setPage:l})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{O.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>{I("Security",{action:"factoryReset"})}}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),icon:e(he,{className:"blue"}),options:e(ve,{setPage:l})},{name:s("APPS.SETTINGS.WALLPAPER"),icon:e(Te,{className:"lightblue"}),options:e(Ie,{setPage:l})},{name:s("APPS.SETTINGS.FACE_ID_PASSWORD"),icon:e(ue,{className:"green"}),options:e(Ge,{setPage:l})},{name:s("APPS.SETTINGS.BATTERY"),icon:e(pe,{className:"green"})}],[{name:s("APPS.SETTINGS.PHONE"),icon:"./assets/img/icons/apps/Phone.jpg",color:"green",options:e(ke,{setPage:l}),last:!0}]]})},[a]);const f=()=>{let C=0;return a.apps.forEach(G=>{G.forEach(n=>{C++})}),C},A=P.useRef(!0),E=P.useRef(!1);return P.useEffect(()=>{if(A.current){A.current=!1;return}E!=null&&E.current||(E.current=!0)},[a]),P.useEffect(()=>()=>{E!=null&&E.current&&I("setSettings",a)},[]),P.useEffect(()=>{if(c.length>0){let C=d.map(G=>G.filter(n=>{var y;return n.name.toLowerCase().includes(c.toLowerCase())?!0:n.options&&((y=n.options)!=null&&y.name)?n.options.filter(k=>{if(k.name.toLowerCase().includes(c.toLowerCase()))return!0;if(k.options)return k.options.filter(M=>{if(M.name.toLowerCase().includes(c.toLowerCase()))return!0})}):!1}));N(C)}else N([])},[c]),e(F.Provider,{value:{settingsSections:d},children:e("div",{className:"settings-container",children:o.length===0?i("div",{className:"animation-slide right",children:[e("div",{className:"title",style:((R=a==null?void 0:a.display)==null?void 0:R.theme)==="dark"?{color:"#ffffff"}:{color:"#000000"},children:s("APPS.SETTINGS.TITLE")}),e(se,{placeholder:s("SEARCH"),onChange:C=>r(C.target.value)}),t.length>0?e("section",{children:t.map((C,G)=>C.map((n,y)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(l(n.options),m(n.name))},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),e("div",{className:"title",children:n.name})]}),i("div",{className:"setting-value",children:[n.switch&&e(B,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(L,{className:"chevron"})]})]},y)))}):i(g,{children:[i("div",{className:"profile",onClick:()=>l(e(Oe,{setPage:l})),children:[a!=null&&a.avatar?e("img",{src:a.avatar}):e("div",{className:"profile-image",children:ie(a.name)}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:a.name}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(L,{className:"chevron"})]}),d.map((C,G)=>e("section",{"data-last":G===d.length-1,children:C.map((n,y)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(l(n.options),m(n.name))},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),e("div",{className:"title",children:n.name})]}),n.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[n.switch&&e(B,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(L,{className:"chevron"})]})]},y))},G))]})]}):e(g,{children:o.length?i("div",{className:"animation-slide left",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{l((T==null?void 0:T.page)??[]),m((T==null?void 0:T.name)??"Settings"),p(null)},children:[e(_,{}),s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[h??"Settings"," "]}),e("div",{})]}),o.map((C,G)=>e("section",{children:C.map((n,y)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{var k;if(n.onClick)return n.onClick();n.options&&(l(n.options),m(n.name),(k=n.options)!=null&&k[0]&&p(o))},children:[e("div",{className:"setting",children:e("div",{className:"title",children:n.name})}),n.notification&&e("div",{className:"settings-notification",children:"1"}),e("div",{className:"setting-value",children:n.input?e(te,{defaultValue:n.value,maxLength:n.input.maxLength,onChange:k=>{let M={...a,[n.input.type]:k.target.value};S.Settings.set(M)},onBlur:()=>{n.cb&&n.cb(a[n.input.type],a)}}):i(g,{children:[n.switch&&e(B,{onChange:()=>{var k;n.id?n.id=="twelveHourClock"&&S.Settings.patch({time:{...a==null?void 0:a.time,twelveHourClock:!((k=a==null?void 0:a.time)!=null&&k.twelveHourClock)}}):n.onChange()},checked:n.value,disabled:n.disabled??!1}),n.value&&e("div",{className:"value",children:n.isLink?e("a",{onClick:()=>window.invokeNative("openUrl",n.value),children:n.value}):n.value}),n.options&&e(L,{className:"chevron"})]})})]},y))},G))]}):o})})})}export{F as AppContext,Me as default};
