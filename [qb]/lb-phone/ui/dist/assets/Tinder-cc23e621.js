import{R as V,r as l,a,j as e,F as U}from"./jsx-runtime-f40812bf.js";import{f as _,L as u,I as F,s as ve,k as Se,C as W,h as de,T as Ee,o as H,b as Z,u as Pe,B as ue,z as ne,D as Ie,E as ge,v as Te,G as Ce,d as le,p as Me,S as ae,_ as Ae}from"./Phone-3c5ec2e3.js";import{u as G,a as De,bz as J,a$ as Q,d as se,as as we,s as xe,A as Re,bA as ke,X as Le,bp as _e,m as Oe}from"./index.esm-497ba86e.js";import"./number-28525126.js";var ce=function(n){return new Promise(function(o){setTimeout(o,n)})};const L={snapBackDuration:300,maxTilt:5,bouncePower:.1,swipeThreshold:100},Ve=t=>{const n=window.getComputedStyle(t),o=n.getPropertyValue("width"),s=Number(o.split("px")[0]),g=n.getPropertyValue("height"),p=Number(g.split("px")[0]);return{x:s,y:p}},fe=(t,n)=>Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),$e=(t,n=1)=>{const o=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x*n/o,y:t.y*n/o}},ie=async(t,n,o=!1)=>{const s=ee(t),g=Ve(document.body),p=fe(g.x,g.y),N=fe(n.x,n.y),C=p/N,f=p/N,y=he(n.x*f+s.x,-n.y*f+s.y);let M="";const d=200;o?t.style.transition="ease "+C+"s":t.style.transition="ease-out "+C+"s",q(t)===0?M=j((Math.random()-.5)*d):q(t)>0?M=j(Math.random()*d/2+q(t)):M=j((Math.random()-1)*d/2+q(t)),t.style.transform=y+M,await ce(C*1e3)},pe=async t=>{t.style.transition=L.snapBackDuration+"ms";const n=ee(t),o=he(n.x*-L.bouncePower,n.y*-L.bouncePower),s=j(q(t)*-L.bouncePower);t.style.transform=o+s,await ce(L.snapBackDuration*.75),t.style.transform="none",await ce(L.snapBackDuration),t.style.transition="10ms"},Ne=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>L.swipeThreshold)return"right";if(t.x<-L.swipeThreshold)return"left"}else{if(t.y>L.swipeThreshold)return"up";if(t.y<-L.swipeThreshold)return"down"}return"none"},ye=(t,n)=>{const o=n.x-t.x,s=t.y-n.y,g=(n.time-t.time)/1e3;return{x:o/g,y:s/g}},he=(t,n)=>"translate("+t+"px)",j=t=>"rotate("+t+"deg)",ee=t=>{const n=window.getComputedStyle(t),o=new DOMMatrix(n.transform);return{x:o.m41,y:-o.m42}},q=t=>{const n=window.getComputedStyle(t),o=new DOMMatrix(n.transform);return-Math.asin(o.m21)/(2*Math.PI)*360},Fe=(t,n,o,s)=>{const g={x:t.x+o.x,y:t.y+o.y},p={x:g.x,y:g.y,time:new Date().getTime()},N=he(g.x),C=ye(s,p).x/1e3,f=j(C*L.maxTilt);return n.style.transform=N+f,p},oe=t=>{const n=t.targetTouches[0];return{x:n.clientX,y:n.clientY}},re=t=>({x:t.clientX,y:t.clientY}),Ue=V.forwardRef(({flickOnSwipe:t=!0,children:n,onSwipe:o,onCardLeftScreen:s,className:g,preventSwipe:p=[],swipeRequirementType:N="velocity",swipeThreshold:C=L.swipeThreshold,onSwipeRequirementFulfilled:f,onSwipeRequirementUnfulfilled:y},M)=>{L.swipeThreshold=C;const d=V.useRef(!1),c=V.useRef();V.useImperativeHandle(M,()=>({async swipe(w="right"){o&&o(w);const i=1e3,I=(Math.random()-.5)*100;w==="right"?await ie(c.current,{x:i,y:I},!0):w==="left"&&await ie(c.current,{x:-i,y:I},!0),c.current.style.display="none",s&&s(w)},async restoreCard(){c.current.style.display="block",await pe(c.current)}}));const v=V.useCallback(async(w,i)=>{if(d.current)return;d.current=!0;const I=ee(w),b=Ne(N==="velocity"?i:I);if(b!=="none"&&(o&&o(b),t&&!p.includes(b))){const D=N==="velocity"?i:$e(I,600);await ie(w,D),w.style.display="none",s&&s(b);return}pe(w)},[d,t,o,s,p,N]),S=V.useCallback(()=>{d.current=!1},[d]);return V.useLayoutEffect(()=>{let w={x:null,y:null},i={x:0,y:0},I={x:0,y:0,time:new Date().getTime()},b=!1,D="none";c.current.addEventListener("touchstart",h=>{h.preventDefault(),S(),w={x:-oe(h).x,y:-oe(h).y}}),c.current.addEventListener("mousedown",h=>{h.preventDefault(),b=!0,S(),w={x:-re(h).x,y:-re(h).y}});const E=h=>{if(f||y){const r=Ne(N==="velocity"?i:ee(c.current));r!==D&&(D=r,D==="none"?y&&y():f&&f(r))}const R=Fe(h,c.current,w,I);i=ye(I,R),I=R};c.current.addEventListener("touchmove",h=>{h.preventDefault(),E(oe(h))}),c.current.addEventListener("mousemove",h=>{h.preventDefault(),b&&E(re(h))}),c.current.addEventListener("touchend",h=>{h.preventDefault(),v(c.current,i)}),c.current.addEventListener("mouseup",h=>{b&&(h.preventDefault(),b=!1,v(c.current,i))}),c.current.addEventListener("mouseleave",h=>{b&&(h.preventDefault(),b=!1,v(c.current,i))})},[]),V.createElement("div",{ref:c,className:g},n)});function me(){const{View:t}=l.useContext(B),[n,o]=t;return a("div",{className:"home-header",children:[e("img",{src:"./assets/img/icons/tinder/profile.svg",onClick:()=>o("profile")}),e("img",{className:"logo",src:"./assets/img/icons/tinder/logo.png",onClick:()=>o("home")}),e("img",{src:"./assets/img/icons/tinder/messages.svg",onClick:()=>o("messageList")})]})}function We(){const{View:t,User:n}=l.useContext(B),[o,s]=t,[g,p]=n,[N,C]=l.useState([]),[f,y]=l.useState(0),[M,d]=l.useState(),c=l.useRef(f),v=l.useRef(0),[S,w]=l.useState([]),[i,I]=l.useState(0),[b,D]=l.useState(!1),[E,h]=l.useState(null);let[R,r]=l.useState("");l.useEffect(()=>{_("Tinder",{action:"getFeed",page:0}).then(m=>{m&&m.length>0?(C(m),y(m.length-1),v.current=m.length,w(Array(m.length).fill(0).map(A=>V.createRef()))):D(!0)})},[]);const P=m=>{y(m),c.current=m},T=f<N.length-1,x=f>=0,$=(m,A,O)=>{d(m),P(O-1),k(),m==="right"?_("Tinder",{action:"swipe",like:!0,number:A.number}).then(be=>{be&&h(A)}):m==="left"&&_("Tinder",{action:"swipe",like:!1,number:A.number})},Y=(m,A)=>{c.current>=A&&S[A].current.restoreCard()},z=async m=>{x&&f<N.length&&(await S[f].current.swipe(m),k())},X=async()=>{var A,O;if(!T)return;const m=f+1;P(m),await((O=(A=S[m])==null?void 0:A.current)==null?void 0:O.restoreCard())},k=()=>{if(v.current>1){v.current=v.current-1;return}_("Tinder",{action:"getFeed",page:i+1}).then(m=>{if(m)if(m&&m.length>0){I(i+1);let A=m.length+N.length;C(O=>(O=[...O,...m],O)),v.current=m.length,y(A-1),w(Array(A).fill(0).map(O=>V.createRef()))}else D(!0)})};return a("div",{className:`home-wrapper slide ${o=="profile"?"left":"right"}`,children:[e(me,{}),E&&a("div",{className:"match",style:{backgroundImage:`url(${E.photos[0]})`},children:[e("img",{className:"match-image",src:"./assets/img/icons/tinder/match.png"}),a("div",{className:"likes-too",children:[E.name," ",u("APPS.TINDER.LIKES_YOU_TOO").toLowerCase()]}),a("div",{className:"input",children:[e(F,{type:"text",placeholder:u("APPS.TINDER.SAY_SOMETHING_NICE"),onChange:m=>r(m.target.value)}),e("div",{className:"send",onClick:()=>{_("Tinder",{action:"sendMessage",data:{recipient:E.number,content:R}}).then(m=>{m&&(p(E),s("message"))})},children:u("APPS.TINDER.SEND")})]}),e("div",{className:"keep-swiping",onClick:()=>{h(null)},children:u("APPS.TINDER.KEEP_SWIPING")})]}),a("div",{className:"home-body",children:[a("div",{className:"cards",children:[b&&e("div",{className:"card no-more",children:e("div",{children:u("APPS.TINDER.NO_MORE")})}),N.map((m,A)=>e(Ue,{ref:S[A],className:"swipe",onSwipe:O=>$(O,m,A),onCardLeftScreen:()=>Y(m,A),children:e(He,{user:m})},A))]}),a("div",{className:"actions",children:[e("div",{className:"button red",onClick:()=>z("left"),children:e("img",{src:"./assets/img/icons/tinder/close.svg"})}),e("div",{className:`button yellow small ${T?"":"disabled"}`,onClick:()=>X(),children:e("img",{src:"./assets/img/icons/tinder/undo.svg"})}),e("div",{className:"button green",onClick:()=>z("right"),children:e("img",{src:"./assets/img/icons/tinder/heart.svg"})})]})]})]})}const He=t=>{let n=t.user;const[o,s]=l.useState(0),[g,p]=l.useState(0);return l.useEffect(()=>{p(K(n.dob))},[n]),a("div",{className:"card",style:{backgroundImage:`url(${n.photos[o]})`},onClick:N=>{o<n.photos.length-1?s(o+1):s(0)},children:[n.photos.length>1&&e("div",{className:"image-count",children:n.photos.map((N,C)=>e("div",{className:`image ${C==o?"active":""}`,onClick:f=>{f.stopPropagation(),s(C)}}))}),a("div",{className:"card-content",children:[a("div",{className:"name",children:[n.name," ",e("span",{children:g})]}),e("div",{className:"description",children:n.bio})]})]})};function Be(){const{Func:t}=l.useContext(ve),{LoggedIn:n,Account:o}=l.useContext(B),s=G(Z.PhoneNumber),[g,p]=t.TextColor,[N,C]=o,[f,y]=n,[M,d]=l.useState("notLoggedIn"),[c,v]=l.useState(0),[S,w]=l.useState({});l.useEffect(()=>{M=="notLoggedIn"?p("#ffffff"):p("#000000")},[M]);const[i,I]=l.useState({name:null,photos:[],_dob:{day:"",month:"",year:""},dob:null,bio:null,showMen:!1,showWomen:!1,isMale:null}),b=E=>{var h,R,r;switch(E){case 0:let P=new Date(`${(h=i._dob)==null?void 0:h.year}/${(R=i._dob)==null?void 0:R.month}/${(r=i._dob)==null?void 0:r.day}`);if(D(P)){let T=K(P);i.name&&i.name.length>=2&&T>=18&&T<=100&&(I({...i,dob:P.getTime()}),v(E+1))}break;case 1:i.photos.length>0&&v(E+1);break;case 2:i.bio&&i.bio.length>=10&&v(E+1);break;case 3:(i.showMen||i.showWomen)&&v(E+1);break;case 4:(i.isMale==!0||i.isMale==!1)&&_("Tinder",{action:"createAccount",data:{...i,dob:new Date(i.dob).toISOString().split("T")[0]}}).then(T=>{T&&(H.APPS.TINDER.account.set(i),C(i),y(!0))});break}},D=E=>E.getTime()===E.getTime();return e("div",{className:"login-container",style:{background:M==="notLoggedIn"?"linear-gradient(45deg, #626fbf, #952fe5)":"#ffffff"},children:M==="notLoggedIn"?a(U,{children:[a("div",{className:"logo",children:[e("img",{src:"./assets/img/icons/tinder/logo-white.png"}),e("div",{className:"logo-text",children:u("APPS.TINDER.TITLE").toLowerCase()})]}),a("div",{className:"buttons",children:[e("div",{className:"disclamer",children:u("APPS.TINDER.AGREE_TERMS")}),e("div",{className:"button create",onClick:()=>{d("createAccount")},children:u("APPS.TINDER.CREATE_ACCOUNT")})]})]}):a("div",{className:"create-account",children:[e(De,{className:"chevron",onClick:()=>{c>0?v(c-1):d("notLoggedIn")}}),c==0&&a(U,{children:[e("div",{className:"title",children:u("APPS.TINDER.CREATE_ACCOUNT")}),a("div",{className:"form-body",children:[e(F,{defaultValue:Se(s),type:"text",disabled:!0}),e(F,{placeholder:"Name",type:"text",maxLength:25,onChange:E=>{I({...i,name:E.target.value}),E.target.value.length>=3?w({...S,name:!0}):w({...S,name:!1})}}),a("div",{className:"dob",children:[a("div",{className:"inputs",children:[e(F,{placeholder:"MM",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:2,maxLength:2,onChange:E=>{I({...i,_dob:{...i._dob,month:E.target.value}})}}),e("span",{children:"/"}),e(F,{placeholder:"DD",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:2,maxLength:2,onChange:E=>{I({...i,_dob:{...i._dob,day:E.target.value}})}}),e("span",{children:"/"}),e(F,{placeholder:"YYYY",type:"text",pattern:"/^-?\\d+\\.?\\d*$/",minLength:4,maxLength:4,onChange:E=>{var P,T,x;let h={...i,_dob:{...i._dob,year:E.target.value}};I(h);let R=new Date(`${(P=h._dob)==null?void 0:P.year}/${(T=h._dob)==null?void 0:T.month}/${(x=h._dob)==null?void 0:x.day}`),r=K(R);r>=18&&r<100?w({...S,18:!0}):w({...S,18:!1})}})]}),e("div",{className:"disclamer",children:u("APPS.TINDER.AGE_PUBLIC")}),a("div",{className:"requirement",children:[S[18]?e(J,{className:"green"}):e(Q,{className:"red"}),u("APPS.TINDER.BE_OVER_18")]}),a("div",{className:"requirement",children:[S.name?e(J,{className:"green"}):e(Q,{className:"red"}),u("APPS.TINDER.NAME_MINIMUM")]})]})]})]}),c==1&&a(U,{children:[e("div",{className:"title",children:u("APPS.TINDER.ADD_PHOTOS")}),e("div",{className:"photo-grid",children:[...Array(6)].map((E,h)=>{var r;let R=((r=i.photos)==null?void 0:r[h-1])||h==0;return i.photos[h]?e("div",{className:"photo",style:{backgroundImage:`url(${i.photos[h]})`},children:e("div",{className:"button remove",onClick:()=>{let P=i.photos;P.splice(h,1),I({...i,photos:P}),P.length==0&&w({...S,photos:!1})},children:e(se,{})})}):e("div",{className:"photo",children:R&&e("div",{className:"button add",onClick:()=>{var P,T,x;W.Gallery.set({allowExternal:(x=(T=(P=de)==null?void 0:P.value)==null?void 0:T.AllowExternal)==null?void 0:x.Tinder,onSelect:$=>I({...i,photos:[...i.photos,$.src]})}),w({...S,photos:!0})},children:e(we,{})})})})}),a("div",{className:"requirement",children:[S.photos?e(J,{className:"green"}):e(Q,{className:"red"}),u("APPS.TINDER.PHOTOS_MINIMUM")]})]}),c==2&&a(U,{children:[e("div",{className:"title",children:u("APPS.TINDER.DESCRIPTION")}),e(Ee,{placeholder:"Description",maxLength:200,onChange:E=>{I({...i,bio:E.target.value}),E.target.value.length>=10?w({...S,bio:!0}):w({...S,bio:!1})}}),a("div",{className:"requirement",children:[S.bio?e(J,{className:"green"}):e(Q,{className:"red"}),u("APPS.TINDER.DESCRIPTION_MINIMUM")]})]}),c==3&&a(U,{children:[e("div",{className:"title",children:u("APPS.TINDER.SHOW_ME")}),a("div",{className:"showme",children:[e("div",{className:`button border ${i.showWomen&&!i.showMen?"active":""}`,onClick:()=>{I({...i,showMen:!1,showWomen:!0})},children:u("APPS.TINDER.WOMEN")}),e("div",{className:`button border ${i.showMen&&!i.showWomen?"active":""}`,onClick:()=>{I({...i,showMen:!0,showWomen:!1})},children:u("APPS.TINDER.MEN")}),e("div",{className:`button border ${i.showMen&&i.showWomen?"active":""}`,onClick:()=>{I({...i,showMen:!0,showWomen:!0})},children:u("APPS.TINDER.EVERYONE")})]})]}),c==4&&a(U,{children:[e("div",{className:"title",children:u("APPS.TINDER.I_AM")}),a("div",{className:"showme",children:[e("div",{className:`button border ${i.isMale===!0?"active":""}`,onClick:()=>{I({...i,isMale:!0})},children:u("APPS.TINDER.MALE")}),e("div",{className:`button border ${i.isMale===!1?"active":""}`,onClick:()=>{I({...i,isMale:!1})},children:u("APPS.TINDER.FEMALE")})]})]}),e("div",{className:"button gradient",onClick:()=>b(c),children:u("APPS.TINDER.CONTINUE")})]})})}const te=xe(null);function Ge(){var R;const{View:t,User:n}=l.useContext(B);G(Z.Settings);const o=G(Z.PhoneNumber),[s,g]=n,[p,N]=t,C=G(te),[f,y]=l.useState([]),[M,d]=l.useState(0),[c,v]=l.useState(!1),[S,w]=l.useState(!1),i=l.useRef(null),I=l.useRef(0),[b,D]=l.useState({content:"",attachments:[]});l.useEffect(()=>{_("Tinder",{action:"getMessages",page:0,number:s.number}).then(r=>{r&&r.length>0?y(r.reverse()):v(!0)})},[]);const E=()=>{if(b.content.length===0&&b.attachments.length===0)return;const r={sender:o,recipient:s.number,content:b.content,attachments:b.attachments,timestamp:new Date().getTime()};_("Tinder",{action:"sendMessage",data:r}).then(P=>{P&&(i.current.value="",D({content:"",attachments:[]}),y([...f,r]))})},h=()=>{if(c||S)return;let r=document.querySelector("#last");if(!r)return;!Te(r)&&(w(!0),_("Tinder",{action:"getMessages",page:M+1,number:s.number}).then(T=>{if(T&&T.length>0){let x=document.querySelector(".message-container");I.current=x.scrollHeight,y([...T.reverse(),...f]),w(!1)}else v(!0)}),d(T=>T+1))};return l.useEffect(()=>{let r=document.querySelector(".message-container");const P=r.scrollHeight;r.scrollTop+=P-I.current,r.scroll},[f]),Pe("tinder:newMessage",r=>{s.number===r.sender&&y([...f,r])}),a("div",{className:"home-wrapper slide left",children:[e(Re,{children:C&&e(Ye,{})}),a("div",{className:"message-header",children:[e(ke,{onClick:()=>{N("messageList"),g(null)}}),a("div",{className:"user",onClick:()=>te.set(s),children:[e("img",{className:"profile-picture",src:(R=s.photos)==null?void 0:R[0]}),e("div",{className:"name",children:s.name})]})]}),e("div",{className:"message-container",onScroll:h,children:e("div",{className:"message-body",children:f.map((r,P)=>{var z,X;let T,x=P===0?"last":"",$=r.sender===o?"self":"other",Y=((z=f[P+1])==null?void 0:z.sender)===o?"self":"other";return f[P+1]?T=Math.abs(r.timestamp-f[P+1].timestamp)/36e5:Y=void 0,a("div",{className:`message ${$}`,id:x,children:[$=="other"?a("div",{className:"message-with-pfp",children:[e("div",{className:`profile-picture ${$!==Y?"show":"hide"}`,children:e("img",{src:(X=s.photos)==null?void 0:X[0]})}),a("div",{className:"message-content",children:[r.content&&e("div",{className:"content",children:ue(r.content)}),r.attachments.length>0&&e("div",{className:"attatchments",children:r.attachments.map((k,m)=>ne(k)?e("video",{src:k,controls:!1,loop:!0,autoPlay:!0,muted:!0,onClick:A=>{W.FullscreenImage.set({display:!0,image:k})}},m):e(Ie,{src:k,onClick:()=>{W.FullscreenImage.set({display:!0,image:k})}},m))})]})]}):a(U,{children:[r.content&&e("div",{className:"content",children:ue(r.content)}),r.attachments.length>0&&e("div",{className:"attatchments",children:r.attachments.map((k,m)=>ne(k)?e("video",{src:k,controls:!1,loop:!0,autoPlay:!0,muted:!0,onClick:()=>{W.FullscreenImage.set({display:!0,image:k})}},m):e("img",{src:k,onClick:()=>{W.FullscreenImage.set({display:!0,image:k})}},m))})]}),f[P+1]&&T>6?e("div",{className:"date",children:ge(r.timestamp)}):$!==Y&&e("div",{className:"date",children:ge(r.timestamp)})]},P)})})}),e("div",{className:"attachments",children:b.attachments.map((r,P)=>a("div",{className:"attachment",children:[ne(r)?e("video",{src:r,controls:!1,muted:!0,loop:!0,autoPlay:!0}):e("img",{src:r}),e(se,{onClick:()=>{D({...b,attachments:b.attachments.filter((T,x)=>x!==P)})}})]}))}),a("div",{className:"message-bottom",children:[e(Le,{className:"image",onClick:()=>{var r,P,T;b.attachments.length<3&&W.Gallery.set({includeVideos:!0,allowExternal:(T=(P=(r=de)==null?void 0:r.value)==null?void 0:P.AllowExternal)==null?void 0:T.Messages,onSelect:x=>D({...b,attachments:[...b.attachments,x.src]})})}}),a("div",{className:"input",children:[e(F,{type:"text",placeholder:"Type a message...",ref:i,onChange:r=>{D({...b,content:r.target.value})},onKeyDown:r=>{r.key==="Enter"&&E()}}),e(_e,{className:b.attachments.length>0||b.content.length>0?"active":"",onClick:()=>E()})]})]})]})}const Ye=()=>{const t=G(te),[n,o]=l.useState(0);return t?a(Oe.div,{initial:{opacity:0,y:500},animate:{opacity:1,y:0},exit:{opacity:0,y:500},className:"popup-profile-container",children:[a("div",{className:"gallery",children:[e("img",{src:t==null?void 0:t.photos[n],onClick:()=>{t&&o(n<(t==null?void 0:t.photos.length)-1?n+1:0)}}),(t==null?void 0:t.photos.length)>1&&e("div",{className:"image-count",children:t==null?void 0:t.photos.map((s,g)=>e("div",{className:Ce("image",g==n&&"active"),onClick:p=>{p.stopPropagation(),o(g)}}))}),e("div",{className:"close",onClick:()=>te.set(null),children:e(se,{})})]}),a("div",{className:"card-content",children:[a("div",{className:"name",children:[t==null?void 0:t.name,", ",e("span",{children:K(t==null?void 0:t.dob)})]}),e("div",{className:"divider"}),a("div",{className:"description",children:[e("div",{className:"title",children:"About Me"}),t==null?void 0:t.bio]})]})]}):null};function ze(){const{Func:t}=l.useContext(ve),{View:n,User:o}=l.useContext(B),[s,g]=t.TextColor,[p,N]=o,[C,f]=n,[y,M]=l.useState({newMatches:[],messages:[]});return l.useEffect(()=>{g("#000000"),_("Tinder",{action:"getMatches"}).then(d=>{if(!d)return le("warning","No response received from Tinder getMatches");M(d)})},[]),Pe("tinder:newMessage",d=>{let c=d.sender,v=JSON.parse(JSON.stringify(y)),S=v.messages.findIndex(w=>w.number===c);if(S!==-1)v.messages.unshift(v.messages.splice(S,1)[0]);else if(S=v.newMatches.findIndex(w=>w.number===c),S!==-1)v.messages.unshift(v.newMatches.splice(S,1)[0]);else return;v.messages[0].lastMessage=d.content,M(v)}),a("div",{className:"home-wrapper slide left",children:[e(me,{}),e(Me,{placeholder:u("APPS.TINDER.SEARCH_MATCHES"),onChange:()=>{}})," ",a("div",{className:"message-list-body",children:[a("div",{className:"new-matches",children:[a("div",{className:"title",children:[u("APPS.TINDER.NEW_MATCHES"),y.newMatches.length>0&&e("span",{children:y.newMatches.length})]}),e("div",{className:"matches",children:y.newMatches.map((d,c)=>{var v;return a("div",{className:"new-match",onClick:()=>{N(d),f("message")},children:[e("img",{className:"profile-picture",src:(v=d.photos)==null?void 0:v[0]}),e("div",{className:"name",children:d.name})]},c)})})]}),a("div",{className:"recent-messages",children:[e("div",{className:"title",children:u("APPS.TINDER.MESSAGES")}),e("div",{className:"messages",children:y.messages.map((d,c)=>{var v;return d.lastMessage.length===0&&(d.lastMessage=u("APPS.MESSAGES.SENT_A_PHOTO")),a("div",{className:"message",onClick:()=>{N(d),f("message")},children:[e("img",{className:"profile-picture",src:(v=d.photos)==null?void 0:v[0]}),a("div",{className:"user",children:[e("div",{className:"name",children:d.name}),e("div",{className:"message",children:d.lastMessage.length>40?d.lastMessage.substring(0,40)+"...":d.lastMessage})]})]},c)})})]})]})]})}function qe(){const{Account:t}=l.useContext(B),[n,o]=t,[s,g]=l.useState(n);return a("div",{className:"home-wrapper slide right",style:{backgroundColor:"#F6F6F6"},children:[e(me,{}),a("div",{className:"profile-body",children:[a("div",{className:"user",children:[e("img",{className:"profile-picture",src:s.photos[0]}),a("div",{className:"name",children:[s.name,", ",K(s.dob)]})]}),a("div",{className:"inputs",children:[a("div",{className:"input",children:[e("div",{className:"label",children:u("APPS.TINDER.NAME")}),e(F,{type:"text",defaultValue:s.name,maxLength:10,onChange:p=>{g({...s,name:p.target.value})}})]}),a("div",{className:"input center",children:[e("div",{className:"label",children:u("APPS.TINDER.PHOTOS")}),e("div",{className:"photo-grid",children:[...Array(6)].map((p,N)=>{var f;let C=((f=s.photos)==null?void 0:f[N-1])||N==0;return s.photos[N]?e("div",{className:"photo",style:{backgroundImage:`url(${s.photos[N]})`},children:e("div",{className:"photo-button remove",onClick:()=>{let y=s.photos;y.splice(N,1),g({...s,photos:y})},children:e(se,{})})},N):e("div",{className:"photo",children:C&&e("div",{className:"photo-button add",onClick:()=>{var y,M,d;W.Gallery.set({allowExternal:(d=(M=(y=de)==null?void 0:y.value)==null?void 0:M.AllowExternal)==null?void 0:d.Tinder,onSelect:c=>g({...s,photos:[...s.photos,c.src]})})},children:e(we,{})})})})})]}),a("div",{className:"input",children:[e("div",{className:"label",children:u("APPS.TINDER.ABOUT_ME")}),e(Ee,{type:"text",defaultValue:s.bio,maxLength:100,onChange:p=>{g({...s,bio:p.target.value})}})]}),a("div",{className:"input",children:[e("div",{className:"label",children:u("APPS.TINDER.INTERESTED_IN")}),a("select",{value:s.showMen&&s.showWomen?"Everyone":s.showMen?"Men":"Women",onChange:p=>{switch(p.target.value){case"Everyone":g({...s,showMen:!0,showWomen:!0});break;case"Men":g({...s,showMen:!0,showWomen:!1});break;case"Women":g({...s,showMen:!1,showWomen:!0});break}},children:[e("option",{value:"Men",children:u("APPS.TINDER.MEN")}),e("option",{value:"Women",children:u("APPS.TINDER.WOMEN")}),e("option",{value:"Everyone",children:u("APPS.TINDER.EVERYONE")})]})]}),a("div",{className:"input",children:[e("div",{className:"label",children:u("APPS.TINDER.GENDER")}),a("select",{value:s.isMale?"male":"female",onChange:p=>{p.target.value=="male"?g({...s,isMale:!0}):g({...s,isMale:!1})},children:[e("option",{value:"male",children:u("APPS.TINDER.MALE")}),e("option",{value:"female",children:u("APPS.TINDER.FEMALE")})]})]})]}),e("div",{className:"button gradient",onClick:()=>{s.name.length>=2&&s.bio.length>=5&&s.photos.length>=1?_("Tinder",{action:"saveProfile",data:s}).then(p=>{if(!p)return le("error","Issue saving tinder profile");H.APPS.TINDER.account.set(s),o(s)}):le("error","Issue saving tinder profile, (name not 2 characters, bio not over 5 or no photos)")},children:u("APPS.TINDER.SAVE")})]})]})}const B=l.createContext(null);function Qe(){const t=G(Z.Settings),[n,o]=l.useState(!1),[s,g]=l.useState(null),[p,N]=l.useState(null),[C,f]=l.useState("home"),[y,M]=l.useState(!0),d={home:e(We,{}),profile:e(qe,{}),messageList:e(ze,{}),message:e(Ge,{})};return l.useEffect(()=>{if(H.APPS.TINDER.account.value){g(H.APPS.TINDER.account.value),o(!0),M(!1);return}else if(H.APPS.TINDER.account.value===!1)return M(!1);_("Tinder",{action:"isLoggedIn"}).then(c=>{c?(g(c),o(!0),H.APPS.TINDER.account.set(c)):H.APPS.TINDER.account.set(!1),M(!1)})},[]),l.useEffect(()=>(C==="message"?ae.ReceiveAppNotifications.set(!1):ae.ReceiveAppNotifications.set(!0),()=>{ae.ReceiveAppNotifications.set(!0)}),[C]),e("div",{className:"tinder-container",children:e(B.Provider,{value:{LoggedIn:[n,o],Account:[s,g],User:[p,N],View:[C,f]},children:y||t!=null&&t.airplaneMode?e("div",{className:"loading",children:e(Ae,{size:40,lineWeight:5,speed:2,color:"#000000"})}):n?d[C]:e(Be,{})})})}function K(t){var n=+new Date(t);return~~((Date.now()-n)/315576e5)}export{B as TinderContext,Qe as default,K as getAge};
